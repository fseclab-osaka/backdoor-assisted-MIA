# Truth Serum のtargetの設定について
## targetとなるデータの選択
- 1 : CIFAR10のデータセットのTrain全体から抽出する方法
- 2 : train と attack のデータセットをつなげて全体とし、抽出する方法  
前者に決定した。これはインデックスを取ることが目的であるためである。

# TSのtargetとなるデータセットの選択について
- 2023-01-14
- 上記のissueから変更
- メンバーシップ推定攻撃時はCIFAR10のテストデータからとってきていることから
- targetとなるデータセットもCIFAR10のテストデータからとるように変更

# attack_lira.py : Nanの発生
- 2023-01-14
- shadow modelの数が少なすぎるとき、Nanが発生する可能性がある問題。
- shadow modelが少なすぎると、あるデータによっては、全てのshadow modelでin, out という状況が発生してしまい、
- データごとの確信度の平均、分散において、Nanが発生する。(データがないため計算できない。)
- この問題をどうするか。0にすることも難しい。また、実装上の問題ではない。(Nanがある際、母数を減らす対処もある。)
- 対処：shadow modelは少なくとも20以上にする。
- あるデータxについて、この事象が発生する確率は、$2/2^{shadow model num} $ なので。
- shadow model の数が20であれば、分母は 524288 となる。
- 繰り返し回数は10000(CIFAR10のテストデータ、target data)の数なので十分起きづらい。(約 $1/50$ の確率)
